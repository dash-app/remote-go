package daikin01_test

import (
	"testing"

	"github.com/dash-app/remote-go/aircon"
	"github.com/dash-app/remote-go/aircon/daikin/daikin01"
	"github.com/dash-app/remote-go/test"
)

func Test_Daikin01(t *testing.T) {
	rem := daikin01.New()

	tests := []*test.ACTestEntry{
		{
			Title:  "Cool",
			Remote: rem,
			Original: [][]int{
				{0x00},
				{0x11, 0xDA, 0x27, 0x00, 0xC5, 0x00, 0x00, 0xD7},
				{0x11, 0xDA, 0x27, 0x00, 0x42, 0x00, 0x00, 0x54},
				{0x11, 0xDA, 0x27, 0x00, 0x00, 0x39, 0x24, 0x00, 0xA0, 0x00, 0x00, 0x06, 0x60, 0x00, 0x00, 0xC1, 0x00, 0x00, 0x36},
			},
			Entry: &aircon.Entry{
				Operation:      true,
				Mode:           "cool",
				Temp:           18.0,
				Fan:            "auto",
				HorizontalVane: "keep",
				VerticalVane:   "keep",
			},
		},
		{
			Title:  "Cool/Temp=32.0",
			Remote: rem,
			Original: [][]int{
				{0x00},
				{0x11, 0xDA, 0x27, 0x00, 0xC5, 0x00, 0x00, 0xD7},
				{0x11, 0xDA, 0x27, 0x00, 0x42, 0x00, 0x00, 0x54},
				{0x11, 0xDA, 0x27, 0x00, 0x00, 0x39, 0x40, 0x00, 0xA0, 0x00, 0x00, 0x06, 0x60, 0x00, 0x00, 0xC1, 0x00, 0x00, 0x52},
			},
			Entry: &aircon.Entry{
				Operation:      true,
				Mode:           "cool",
				Temp:           32.0,
				Fan:            "auto",
				HorizontalVane: "keep",
				VerticalVane:   "keep",
			},
		},
		{
			Title:  "Heat/Temp=14.0",
			Remote: rem,
			Original: [][]int{
				{0x00},
				{0x11, 0xDA, 0x27, 0x00, 0xC5, 0x00, 0x00, 0xD7},
				{0x11, 0xDA, 0x27, 0x00, 0x42, 0x00, 0x00, 0x54},
				{0x11, 0xDA, 0x27, 0x00, 0x00, 0x49, 0x1C, 0x00, 0xA0, 0x00, 0x00, 0x06, 0x60, 0x00, 0x00, 0xC1, 0x00, 0x00, 0x3E},
			},
			Entry: &aircon.Entry{
				Operation:      true,
				Mode:           "heat",
				Temp:           14.0,
				Fan:            "auto",
				HorizontalVane: "keep",
				VerticalVane:   "keep",
			},
		},
		{
			Title:  "Cool/Fan=5",
			Remote: rem,
			Original: [][]int{
				{0x00},
				{0x11, 0xDA, 0x27, 0x00, 0xC5, 0x00, 0x00, 0xD7},
				{0x11, 0xDA, 0x27, 0x00, 0x42, 0x00, 0x00, 0x54},
				{0x11, 0xDA, 0x27, 0x00, 0x00, 0x39, 0x24, 0x00, 0x70, 0x00, 0x00, 0x06, 0x60, 0x00, 0x00, 0xC1, 0x00, 0x00, 0x06},
			},
			Entry: &aircon.Entry{
				Operation:      true,
				Mode:           "cool",
				Temp:           18.0,
				Fan:            "5",
				HorizontalVane: "keep",
				VerticalVane:   "keep",
			},
		},
		{
			Title:  "Cool/HorizontalVane=swing",
			Remote: rem,
			Original: [][]int{
				{0x00},
				{0x11, 0xDA, 0x27, 0x00, 0xC5, 0x00, 0x00, 0xD7},
				{0x11, 0xDA, 0x27, 0x00, 0x42, 0x00, 0x00, 0x54},
				{0x11, 0xDA, 0x27, 0x00, 0x00, 0x39, 0x24, 0x00, 0xAF, 0x00, 0x00, 0x06, 0x60, 0x00, 0x00, 0xC1, 0x00, 0x00, 0x45},
			},
			Entry: &aircon.Entry{
				Operation:      true,
				Mode:           "cool",
				Temp:           18.0,
				Fan:            "auto",
				HorizontalVane: "swing",
				VerticalVane:   "keep",
			},
		},
	}

	for _, test := range tests {
		t.Run(test.Title, func(t *testing.T) {
			if err := test.Validate(); err != nil {
				t.Error(err)
				t.Fail()
			}
			if err := test.Compare(); err != nil {
				t.Error(err)
				t.Fail()
			}
		})
	}
}
